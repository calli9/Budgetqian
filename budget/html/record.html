<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Computer" content="ie=edge">

    <link rel="stylesheet" href="../css/style.css">
    <title> 小钱钱 | 财务追踪管理</title>

</head>

<body>
    <header class="header">
        <h1>交易记录</h1>
    </header>
    <main class="main padding-nor">
    </main>
    <script src="../js/nav.js"></script>
    <script>
        const content = [
            {
                xlink: "../icomoon/all.svg#credit-card",
                h3: "工资",
                time: "2025-9-14 12:00",
                p: "工资收入",
                num: "+5050.00",
                revenue: 1
            },
            {
                xlink: "../icomoon/all.svg#spoon-knife",
                h3: "午餐",
                time: "2025-9-14 12:00",
                p: "餐饮支出",
                num: "-350.00",
                revenue: 0
            },
            {
                xlink: "../icomoon/all.svg#home3",
                h3: "房子",
                time: "2025-9-14 08:00",
                p: "租房",
                num: "-1200.00",
                revenue: 0
            },
            {
                xlink: "../icomoon/all.svg#briefcase",
                h3: "兼职",
                time: "2025-9-14 08:00",
                p: "兼职收入",
                num: "+800.00",
                revenue: 1
            },
            {
                xlink: "../icomoon/all.svg#shopping-bag",
                h3: "购物",
                time: "2025-9-14 08:00",
                p: "购物",
                num: "-200.00",
                revenue: 0
            }

        ]

        const color = ["green", "red", "blue", "purple", "pink", "orange"]

        const record = document.querySelector("main")
        const svg = document.querySelectorAll("svg")

        //action
        svg.forEach(svg => svg.classList.add("svg-med"))
        record.innerHTML += content.map((item, i) =>
            `<div class="flex card padding-updown margin-sm shadow-light ">
                <div class="flex">
                    <div class="flex padding-lr">
                        <svg class="svg-big color-${color[i]}">
                            <use xlink:href=${item.xlink}></use>
                        </svg>
                    </div>
                    <div>
                        <div class="flex">
                            <h3 class="text-h3">${item.h3}</h3>
                            <span class="font-tiny margin-left">${item.time}</span>
                        </div>
                        <p>${item.p}</p>
                    </div>
                </div>
                    ${item.revenue ? `<div class="font-big font-thick color-green">${item.num}</div >` : `<div class="font-big font-thick color-red">${item.num}</div >`}
            </div >
        `).join('')

        const Ncontent = JSON.parse(localStorage.getItem('user-list'));
        svg.forEach(svg => svg.classList.add("svg-med"))
        record.innerHTML += Ncontent.map((item, i) =>
            `<div class="flex card padding-updown margin-sm shadow-light ">
                <div class="flex">
                    <div class="flex padding-lr">
                        <svg class="svg-big color-${color[i % color.length]}">
                            <use xlink:href=${item.xlink}></use>
                        </svg>
                    </div>
                    <div>
                        <div class="flex">
                            <h3 class="text-h3">${item.h3}</h3>
                            <span class="font-tiny margin-left">${item.time}</span>
                        </div>
                        <p>${item.p}</p>
                    </div>
                </div>
                    ${item.revenue ? `<div class="font-big font-thick color-green">+${item.num}</div >` : `<div class="font-big font-thick color-red">-${item.num}</div >`}
            </div >
        `).join('')


        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll("main div")
            let current = null               // 记住现在高亮的是谁

            sections.forEach(item =>
                item.addEventListener('click', function () {
                    if (current && current !== this) {          // 把前一个复位
                        current.classList.replace('shadow-Littledark', 'shadow-light')
                    }
                    this.classList.replace('shadow-light', 'shadow-Littledark')
                    current = this                             // 更新指针
                })
            )
        })
    </script>

</body>

</html>